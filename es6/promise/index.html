<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    /*function callback(){
      console.log('done');
    }
    console.log('before')
    setTimeout(callback,1000)
    console.log('after')*/


    function test(resolve, reject) {
      var timeOut = Math.random() * 2 /*Math.random() 产生0-1的随机数，乘以2 就是产生0-2的随机数*/

      setTimeout(function () {
        if (timeOut < 1) {
          resolve('该次执行花费' + timeOut + '秒')
        } else {
          reject('时间已经来到' + timeOut + '秒')
        }
      }, timeOut * 1000)
    }

    /*var p1 = new Promise(test)  /*现在的 p1 就是赋予了promise 权利的方法
    // then是一个API  出现这个API 就是为了解决异步的问题
    var p2 = p1.then(function(result){
      console.log('成功' + result)
    })
    // catch也是一个API
    p2.catch(function(response){
      console.log('失败' + response)
    })*/


    new Promise(test)
        .then(function (result) {
          console.log('执行成功，' + result)
        })
        .then(function(){
          console.log(666)
        })
        .catch(function (response) {
          console.log('执行失败，' + response)
        })
  </script>
</body>

</html>